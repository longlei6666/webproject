<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
		<link rel="stylesheet" href="./css/font.css">
		<link rel="stylesheet" href="//at.alicdn.com/t/font_457932_cqbv0v0vg5yx2yb9.css" />
		<link rel="stylesheet" href="./css/xadmin.css">
		<script type="text/javascript" src="./js/jquery-1.8.3.min.js"></script>
		<script type="text/javascript" src="./lib/layui/layui.js" charset="utf-8"></script>
		<script type="text/javascript" src="./js/xadmin.js"></script>
		<link rel="stylesheet" href="./css/style-system.css">

		<!--<script src="js/jquery.provincesCity.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/provincesData.js" type="text/javascript" charset="utf-8"></script>-->

		<link rel="stylesheet" href="css/style.css" />
		<!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
		<!--[if lt IE 9]>
      <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
      <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

		<style>
			/*.layui-form-select dl {
				max-height: 155px;
			}*/
			
			form.layui-form {
				width: 100%;
			}
			
			.layui-colla-content {
				padding: 0;
			}
			.layui-tab-item{position: relative;}
			.tagsadd{position: absolute;bottom: 0;width: 100%;}
			.tagsadd input{width: calc(100% - 100px);float: left;}
			.tagsadd button{width:100px;float: left;}
		</style>
	</head>

	<body>
		<div class="x-body">
			<div class="layui-row">
				<form class="layui-form layui-col-md12">
					<div class="grid-demo">
						<!--基本资料-->
						<blockquote class="layui-elem-quote"><i class="iconfont icon-wode"></i>系统设置</blockquote>

						<div class="layui-form-item">
							<label for="username" class="layui-form-label">
				                <span class="x-red">* </span>经营模式：
				            </label>
							<div class="layui-input-block">
								<input type="radio" name="lsc" value="正餐" title="正餐" checked="">
								<input type="radio" name="lsc" value="快餐" title="快餐">
							</div>
						</div>

						<div class="layui-form-item plus-tag-add">
							<div class="layui-tab layui-tab-card" lay-filter="demo">
								<ul class="layui-tab-title">
									<li lay-id="system1" class="layui-this">订单备注</li>
									<li lay-id="system2">退单备注</li>
									<li lay-id="system3">撤单备注</li>
								</ul>
								<div class="layui-tab-content">
									<div class="layui-tab-item layui-show">
										<div class="taglist" id="myTags"></div>
										<div class="tagsadd">
											<input id="tagsinput" name="" type="text" class="layui-input" maxlength="50" placeholder="请输入备注内容，不超过50字"/>
											<button id="tagsbtn" type="button" class="layui-btn">添加标签</button>
										</div>
									</div>
									<div class="layui-tab-item">
										<div class="taglist" id="myTags1"></div>
										<div class="tagsadd">
											<input id="tagsinput1" name="" type="text" class="layui-input" maxlength="50" placeholder="请输入备注内容，不超过50字"/>
											<button id="tagsbtn1" type="button" class="layui-btn">添加标签</button>
										</div>
									</div>
									<div class="layui-tab-item">
									</div>
								</div>
							</div>
						</div>

					</div>
				</form>
				<button class="layui-btn formbtn" lay-filter="add" lay-submit="">保存</button>

			</div>
			<!--plus-tag-add end-->

		</div>

		<script type="text/javascript">
			var FancyForm = function() {
				return {
					inputs: "#tagsinput",
					setup: function() {
						var a = this;
						this.inputs = $(this.inputs);
						a.inputs.each(function() {
							var c = $(this);
							a.checkVal(c)
						});
						a.inputs.live("keyup blur", function() {
							var c = $(this);
							a.checkVal(c);
						});
					},
					checkVal: function(a) {
						a.val().length > 0 ? a.parent("li").addClass("val") : a.parent("li").removeClass("val")
					}
				}
			}();

			$(document).ready(function() {
				FancyForm.setup();
			});

			var searchAjax = function() {};
			var G_tocard_maxTips = 30;

			$(function() {
				(
					function() {
						var a = $("#myTags");
						$("a i", a).live("click", function() {
							var c = $(this).parents("a"),
								b = c.attr("title"),
								d = c.attr("value");
							delTips(b, d)
						});
						hasTips = function(b) {
							var d = $("a", a),
								c = false;
							d.each(function() {
								if($(this).attr("title") == b) {
									c = true;
									return false
								}
							});
							return c
						};

						isMaxTips = function() {
							return
							$("a", a).length >= G_tocard_maxTips
						};

						setTips = function(c, d) {
							if(hasTips(c)) {
								return false
							}
							if(isMaxTips()) {
								alert("最多添加" + G_tocard_maxTips + "个标签！");
								return false
							}
							var b = c ? 'value="' + c + '"' : "";
							a.append($("<a " + b + ' title="' + c + '" href="javascript:void(0);" ><span>' + c + '</span><i class="layui-icon layui-tab-close"'+'>ဆ</i></a>'));
							searchAjax(c, d, true);
							return true
						};

						delTips = function(b, c) {
							if(!hasTips(b)) {
								return false
							}
							$("a", a).each(function() {
								var d = $(this);
								if(d.attr("title") == b) {
									d.remove();
									return false
								}
							});
							searchAjax(b, c, false);
							return true
						};

						getTips = function() {
							var b = [];
							$("a", a).each(function() {
								b.push($(this).attr("title"))
							});
							return b
						};

						getTipsId = function() {
							var b = [];
							$("a", a).each(function() {
								b.push($(this).attr("value"))
							});
							return b
						};

						getTipsIdAndTag = function() {
							var b = [];
							$("a", a).each(function() {
								b.push($(this).attr("value") + "##" + $(this).attr("title"))
							});
							return b
						}
					}

				)()
			});

			// 搜索
			(function() {
				var $b = $('#tagsbtn'),
					$i = $('#tagsinput');
				$i.keyup(function(e) {
					if(e.keyCode == 13) {
						$b.click();
					}
				});
				$b.click(function() {
					var name = $i.val().toLowerCase();
					if(name != '') setTips(name, -1);
					$i.val('');
					$i.select();
				});
			})();
		</script>

		<script type="text/javascript">
			var FancyForm1 = function() {
				return {
					inputs: "#tagsinput1",
					setup: function() {
						var a = this;
						this.inputs = $(this.inputs);
						a.inputs.each(function() {
							var c = $(this);
							a.checkVal(c)
						});
						a.inputs.live("keyup blur", function() {
							var c = $(this);
							a.checkVal(c);
						});
					},
					checkVal: function(a) {
						a.val().length > 0 ? a.parent("li").addClass("val") : a.parent("li").removeClass("val")
					}
				}
			}();

			$(function() {
				(
					function() {
						var a = $("#myTags1");
						$("a i", a).live("click", function() {
							var c = $(this).parents("a"),
								b = c.attr("title"),
								d = c.attr("value");
							delTips1(b, d)
						});
						hasTips1 = function(b) {
							var d = $("a", a),
								c = false;
							d.each(function() {
								if($(this).attr("title") == b) {
									c = true;
									return false
								}
							});
							return c
						};

						isMaxTips1 = function() {
							return
							$("a", a).length >= G_tocard_maxTips
						};

						setTips1 = function(c, d) {
							if(hasTips1(c)) {
								return false
							}
							if(isMaxTips1()) {
								alert("最多添加" + G_tocard_maxTips + "个标签！");
								return false
							}
							var b = c ? 'value="' + c + '"' : "";
							a.append($("<a " + b + ' title="' + c + '" href="javascript:void(0);" ><span>' + c + '</span><i class="layui-icon layui-tab-close"'+'>ဆ</i></a>'));
							searchAjax(c, d, true);
							return true
						};

						delTips1 = function(b, c) {
							if(!hasTips1(b)) {
								return false
							}
							$("a", a).each(function() {
								var d = $(this);
								if(d.attr("title") == b) {
									d.remove();
									return false
								}
							});
							searchAjax(b, c, false);
							return true
						};

						getTips1 = function() {
							var b = [];
							$("a", a).each(function() {
								b.push($(this).attr("title"))
							});
							return b
						};

						getTipsId1 = function() {
							var b = [];
							$("a", a).each(function() {
								b.push($(this).attr("value"))
							});
							return b
						};

						getTipsIdAndTag1 = function() {
							var b = [];
							$("a", a).each(function() {
								b.push($(this).attr("value") + "##" + $(this).attr("title"))
							});
							return b
						}
					}

				)()
			});

			// 搜索
			(function() {
				var $b = $('#tagsbtn1'),
					$i = $('#tagsinput1');
				$i.keyup(function(e) {
					if(e.keyCode == 13) {
						$b.click();
					}
				});
				$b.click(function() {
					var name = $i.val().toLowerCase();
					if(name != '') setTips1(name, -1);
					$i.val('');
					$i.select();
				});
			})();
		</script>

		<script>
			layui.use(['form', 'layedit', 'laydate', 'element', 'layer', 'upload'], function() {
				var $ = layui.jquery,
					upload = layui.upload;
				var element = layui.element;
				var layer = layui.layer;
				var form = layui.form,
					layedit = layui.layedit,
					laydate = layui.laydate;

				//				  //监听折叠
				//				  element.on('collapse(test)', function(data){
				//				    layer.msg('展开状态：'+ data.show);
				//				  });

				//多图片上传
				upload.render({
					elem: '#test2',
					url: '/upload/',
					multiple: true,
					before: function(obj) {
						//预读本地文件示例，不支持ie8
						obj.preview(function(index, file, result) {
							$('#demo2').append('<img src="' + result + '" alt="' + file.name + '" class="layui-upload-img">')
						});
					},
					done: function(res) {
						//上传完毕
					}
				});

				//时间范围
				laydate.render({
					elem: '#test9',
					type: 'time',
					range: true
				});

				//监听提交
				form.on('submit(add)', function(data) {
					console.log(data);
					//发异步，把数据提交给php
					layer.alert("增加成功", {
						icon: 6
					}, function() {
						// 获得frame索引
						var index = parent.layer.getFrameIndex(window.name);
						//关闭当前frame
						parent.layer.close(index);
					});
					return false;
				});

			});
		</script>

	</body>

</html>